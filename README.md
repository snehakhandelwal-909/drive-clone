# MyDrive
[![Ask DeepWiki](https://devin.ai/assets/askdeepwiki.png)](https://deepwiki.com/Grm-gh/MyDrive)

MyDrive is a personal cloud storage application designed for secure user authentication and file management. It leverages Node.js and Express for the backend, MongoDB for data persistence, and Firebase Cloud Storage for robust and scalable file handling. Users can register, log in, upload their files, and download them securely.

## Features

-   **User Authentication**: Secure user registration and login system with password hashing (bcrypt).
-   **JWT-based Authorization**: Protected routes and actions using JSON Web Tokens stored in cookies.
-   **File Uploads**: Drag-and-drop file upload functionality storing files directly in Firebase Cloud Storage.
-   **File Management**: A personal dashboard for each user to view their uploaded files.
-   **Secure Downloads**: Files are downloaded via temporary, signed URLs generated by Firebase, ensuring that only authenticated users can access their content.
-   **Dynamic Frontend**: User interface built with EJS for server-side rendering, styled with Tailwind CSS and Flowbite components.

## Tech Stack

-   **Backend**: Node.js, Express.js
-   **Database**: MongoDB with Mongoose
-   **File Storage**: Firebase Cloud Storage
-   **Authentication**: JSON Web Tokens (JWT), bcrypt
-   **Templating Engine**: EJS (Embedded JavaScript)
-   **Frontend Styling**: Tailwind CSS, Flowbite
-   **Middleware**: Multer for handling `multipart/form-data`.

## Getting Started

Follow these instructions to get a local copy of the project up and running.

### Prerequisites

-   [Node.js](https://nodejs.org/) (v14 or higher)
-   [npm](https://www.npmjs.com/)
-   [MongoDB](https://www.mongodb.com/try/download/community) installed and running.
-   A Google [Firebase](https://firebase.google.com/) project with Cloud Storage enabled.

### Installation & Setup

1.  **Clone the repository:**
    ```sh
    git clone https://github.com/grm-gh/mydrive.git
    cd mydrive
    ```

2.  **Install dependencies:**
    ```sh
    npm install
    ```

3.  **Configure Environment Variables:**
    Create a `.env` file in the root of the project and add the following variables:
    ```env
    MONGO_URL=your_mongodb_connection_string
    JWT_SECRET=your_jwt_secret_key
    ```
    - `MONGO_URL`: Your connection string for the MongoDB database.
    - `JWT_SECRET`: A secret string for signing JWTs.

4.  **Configure Firebase:**
    - Go to your Firebase project settings and navigate to "Service accounts".
    - Generate a new private key. This will download a JSON file.
    - Rename this file to `drive-8a0b4-firebase-adminsdk-fbsvc-0253a24150.json` and place it in the root directory of the project.
    - **Note**: The application is hardcoded to look for this specific filename. Ensure your service account key file matches this name.

5.  **Run the application:**
    The server will start on `http://localhost:3000`.
    ```sh
    npm start
    ```

## API Routes

| Method | Endpoint             | Authentication | Description                                             |
|--------|----------------------|----------------|---------------------------------------------------------|
| `GET`  | `/user/register`     | No             | Renders the user registration page.                     |
| `POST` | `/user/register`     | No             | Creates a new user account.                             |
| `GET`  | `/user/login`        | No             | Renders the user login page.                            |
| `POST` | `/user/login`        | No             | Authenticates a user and sets a JWT cookie.             |
| `GET`  | `/home`              | Yes            | Renders the user's dashboard with a list of their files.|
| `POST` | `/upload`            | Yes            | Handles file uploads for the authenticated user.        |
| `GET`  | `/download/:path`    | Yes            | Generates a signed URL and redirects to download a file.|
